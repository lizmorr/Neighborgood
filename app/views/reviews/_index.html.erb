<%= paginate @reviews %>
<% @reviews.each do |review| %>
  <div class="review" id="review_<%= review.id %>">
    <div class="rating">
      <%= review.rating %>
    </div>
    <%= review.description %>
    <%= review.user.email %>
    <% if current_user %>
      <% if review.voted_on_by?(current_user) && review.find_vote(current_user).value == 0 %>
      <div class="vote_icon">
        <div id="u_icon">
          <%= link_to review_upvote_path(review, review.find_vote(current_user)), method: :patch do %>
            <i class="fi-home small"></i>
          <% end %>
        </div>
        <div id="d_icon">
          <%= link_to review_downvote_path(review, review.find_vote(current_user)), method: :patch do %>
            <i class="fi-home small"></i>
          <% end %>
        </div>
      </div>
      <% elsif review.voted_on_by?(current_user) %>
          Already voted. <%= link_to "Cancel.",
          review_vote_path(review, review.find_vote(current_user)), method: :patch %>
      <% else %>
      <div class="vote_icon">
        <div id="u_icon">
          <%= link_to review_upvotes_path(review), method: :post do %>
            <i class="fi-home small"></i>
          <% end %>
        </div>
        <div id="d_icon">
          <%= link_to review_downvotes_path(review), method: :post do %>
            <i class="fi-home small"></i>
          <% end %>
        </div>
      <% end %>
    <% end %>
    <p>Votes: <%= review.total_votes %></p>
  </div>
  <% if review.editable_by?(current_user) %>
    <%= link_to "Edit Review", edit_neighborhood_review_path(review.neighborhood, review)  %>
  <% end %>
  <% if review.deletable_by?(current_user) %>
    <p id="delete"><%= link_to "Delete Review", neighborhood_review_path(review.neighborhood, review), method: :delete %></p>
  <% end %>
<% end %>
